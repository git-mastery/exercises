initialization:
  steps:
    - type: commit
      message: Describe night
      files:
        - name: story.txt
          content: "It was a dark and stormy night.\n"
      id: start
    - type: commit
      message: Describe location
      files:
        - name: story.txt
          content: "It was a dark and stormy night.\nI was alone in my room.\n"
      id: second_commit
    - type: commit
      message: Mention noise
      files:
        - name: story.txt
          content: "It was a dark and stormy night.\nI was alone in my room.\nI heard a strange noise.\n"
    # visitor-line starts from wrong commit (first instead of second)
    - type: bash
      runs: |
        FIRST_COMMIT=$(git log --all --grep="Describe night" --format=%H -n 1)
        git checkout -b visitor-line $FIRST_COMMIT
    - type: commit
      message: Add visitor line
      files:
        - name: story.txt
          content: "It was a dark and stormy night.\nI heard someone knocking at the door.\n"
    - type: bash
      runs: |
        SECOND_COMMIT=$(git log --all --grep="Describe location" --format=%H -n 1)
        git checkout -b sleep-line $SECOND_COMMIT
    - type: commit
      message: Add sleep line
      files:
        - name: story.txt
          content: "It was a dark and stormy night.\nI was alone in my room.\nI fell asleep on the couch.\n"
    - type: checkout
      branch-name: main
